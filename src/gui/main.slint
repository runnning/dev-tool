import { Button, TextEdit, VerticalBox, HorizontalBox, GroupBox } from "std-widgets.slint";
import { StyledButton } from "components/styled_button.slint";
import { SingleLineEdit } from "components/single_line_edit.slint";

export component MainWindow inherits Window {
    title: "开发者工具";
    min-width: 800px;
    min-height: 600px;
    
    in-out property <string> timestamp-input: "";
    in-out property <string> timestamp-output: "";
    in-out property <string> json-input: "";
    in-out property <string> json-output: "";
    
    callback convert-timestamp();
    callback convert-ms-timestamp();
    callback format-json();
    callback get-current-timestamp();
    callback get-current-ms-timestamp();
    
    VerticalBox {
        padding: 16px;
        spacing: 16px;

        GroupBox {
            title: "时间戳转换";
            vertical-stretch: 0;
            
            VerticalBox {
                padding: 16px;
                spacing: 16px;
                
                SingleLineEdit {
                    text <=> root.timestamp-input;
                    placeholder-text: "输入时间戳...";
                    background: #ffffff;
                }

                VerticalBox {
                    spacing: 12px;

                    HorizontalBox {
                        spacing: 12px;
                        alignment: center;
                        StyledButton {
                            text: "获取当前时间戳";
                            clicked => { root.get-current-timestamp(); }
                            width: 160px;
                        }
                        StyledButton {
                            text: "获取毫秒时间戳";
                            clicked => { root.get-current-ms-timestamp(); }
                            width: 160px;
                        }
                    }

                    HorizontalBox {
                        spacing: 12px;
                        alignment: center;
                        StyledButton {
                            text: "Unix时间戳转换";
                            clicked => { root.convert-timestamp(); }
                            width: 160px;
                        }
                        StyledButton {
                            text: "毫秒时间戳转换";
                            clicked => { root.convert-ms-timestamp(); }
                            width: 160px;
                        }
                    }
                }

                SingleLineEdit {
                    text <=> root.timestamp-output;
                    read-only: true;
                    background: #F5F5F5;
                }
            }
        }
        
        GroupBox {
            title: "JSON美化";
            vertical-stretch: 1;
            
            VerticalBox {
                padding: 16px;
                spacing: 12px;
                
                Rectangle {
                    vertical-stretch: 1;
                    background: #ffffff;
                    border-width: 1px;
                    border-color: #E0E0E0;
                    border-radius: 4px;

                    TextEdit {
                        text <=> root.json-input;
                        placeholder-text: "输入JSON文本...";
                        font-size: 14px;
                        width: parent.width;
                        height: parent.height;
                        wrap: word-wrap;
                    }
                }

                HorizontalBox {
                    alignment: center;
                    StyledButton {
                        text: "格式化JSON";
                        clicked => { root.format-json(); }
                        width: 160px;
                    }
                }

                Rectangle {
                    vertical-stretch: 1;
                    background: #F5F5F5;
                    border-width: 1px;
                    border-color: #E0E0E0;
                    border-radius: 4px;

                    TextEdit {
                        text <=> root.json-output;
                        read-only: true;
                        font-size: 14px;
                        width: parent.width;
                        height: parent.height;
                        wrap: word-wrap;
                    }
                }
            }
        }
    }
}
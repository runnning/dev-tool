import { GroupBox, TextEdit, VerticalBox, HorizontalBox } from "std-widgets.slint";
import { StyledButton } from "styled_button.slint";

export component JsonPanel {
    in-out property <string> input: "";
    in-out property <string> output: "";
    
    callback format-json();

    GroupBox {
        title: "JSON美化";
        vertical-stretch: 1;
        
        VerticalBox {
            padding: 16px;
            spacing: 16px;
            alignment: center;
            
            // 输入区域
            Rectangle {
                vertical-stretch: 1;
                min-height: 120px;
                width: 400px;
                background: #ffffff;
                border-width: 1px;
                border-color: #E0E0E0;
                border-radius: 4px;
                clip: true;

                TextEdit {
                    x: 8px;
                    y: 8px;
                    width: parent.width - 16px;
                    height: parent.height - 16px;
                    text <=> root.input;
                    placeholder-text: "输入JSON文本...";
                    font-size: 14px;
                    wrap: word-wrap;
                }
            }

            // 按钮区域
            HorizontalBox {
                alignment: center;
                height: 32px;
                width: 400px;
                StyledButton {
                    text: "格式化JSON";
                    clicked => { root.format-json(); }
                    width: 160px;
                }
            }

            // 输出区域
            Rectangle {
                vertical-stretch: 1;
                min-height: 120px;
                width: 400px;
                background: #F5F5F5;
                border-width: 1px;
                border-color: #E0E0E0;
                border-radius: 4px;
                clip: true;

                TextEdit {
                    x: 8px;
                    y: 8px;
                    width: parent.width - 16px;
                    height: parent.height - 16px;
                    text <=> root.output;
                    read-only: true;
                    font-size: 14px;
                    wrap: word-wrap;
                }
            }
        }
    }
} 